import{i as a,f as c,g as l,h as i,u as d,k as u}from"./index-2963321b.js";import{M as g}from"./index-fbc4d0dc.js";const h=async t=>{const{data:e}=await a.post("notice/",t);return e},w=async t=>{const{data:e}=await a.get(`notice/?major=${t}`);return e},M=async t=>{const{data:e}=await a.get(`notice/${t}`);return e},N=async t=>{const{id:e,...o}=t,{data:s}=await a.patch(`notice/${e}`,o);return s},f=async t=>{const{data:e}=await a.delete(`notice/${t}`);return e},n={notice:"notice",noticeDetail:"noticedetail"},T=t=>{const{createToastMessage:e}=c(),{data:o,isLoading:s}=l([n.notice,t],()=>w(t),{onError:()=>{e("다시 시도해주세요.","error")},staleTime:6e4,refetchInterval:6e4,refetchOnWindowFocus:!1});return{data:o,isLoading:s}},p=t=>{const{createToastMessage:e}=c(),o=i(),{data:s,isLoading:r}=l([n.noticeDetail,t],()=>M(t),{onError:()=>{e("다시 시도해주세요.","error")},staleTime:6e4,refetchInterval:6e4,refetchOnWindowFocus:!1});return o.invalidateQueries(n.noticeDetail),{data:s,isLoading:r}},Q=()=>{const{me:t}=d(),{createToastMessage:e}=c(),o=i();return u(m=>{if(!t)throw new Error;return h({...m,major:g[t.major],writer:t.id})},{onSuccess:()=>{e("공지사항 등록 완료!","success"),o.invalidateQueries(n.notice)},onError:()=>e("다시 시도해주세요.","error")})},v=()=>{const{me:t}=d(),e=i(),{createToastMessage:o}=c();if(!t)throw new Error;return u(r=>N({...r}),{onSuccess:()=>{o("공지사항 수정 완료!","success"),e.invalidateQueries(n.notice)},onError:()=>o("다시 시도해주세요.","error")})},C=()=>{const{createToastMessage:t}=c(),e=i();return u(f,{onSuccess:()=>{t("공지사항 삭제 완료!","success"),e.invalidateQueries(n.notice)},onError:()=>t("다시 시도해주세요.","error")})};export{Q as a,p as b,C as c,v as d,T as u};
