import{i as r,g as o,h as i,f as l,k as d,d as k,P as y}from"./index-004605c5.js";const p=async a=>{const{data:t}=await r.get("locker/",{params:a});return t},g=async a=>{const{data:t}=await r.get("apply/",{params:a});return t},h=async a=>{const{data:t}=await r.post("apply/",a);return t},b=async a=>{const{data:t}=await r.get(`locker/?owned_id=${a}`);if(t.length===0){const{data:e}=await r.get(`locker/?shared_id=${a}`);return e[0]}return t[0]},m=async a=>{const{data:t}=await r.get(`locker/sharable/?major=${a}&is_share_registered=True`);return t},L=async a=>{const{id:t,shared_id:e}=a,{data:s}=await r.put(`locker/${t}`,{shared_id:e});return s},c={apply:"apply",locker:"locker",share:"share"},M=a=>{const t=Object.values(a),{data:e}=o([c.locker,"locker-counts",...t],()=>p(a),{enabled:!!a.building_id&&!!a.major}),{data:s}=o([c.apply,"applicant",...t],()=>g(a),{enabled:!!a.building_id&&!!a.major});return{data:{apply:s,lockerCounts:e}}},S=()=>{const a=i(),{createToastMessage:t}=l();return d(s=>h(s),{onSuccess:({major:s,building_id:n})=>{t("신청 완료 !","success"),a.invalidateQueries([c.apply,"applicant",s,n])},onError:()=>{t("다시 시도해주세요.","error")}})},_=a=>{const{data:t}=o([c.locker,a],()=>b(a));return{myLocker:t}},A=a=>{const{data:t,isLoading:e}=o([c.share,"sharable-lockers",a],()=>m(a),{enabled:!!a,onSuccess:s=>{const n=new Date;return s.filter(({end_date:u})=>u&&new Date(u)>n)}});return{sharableLockers:t,isLoading:e}},v=()=>{const a=i(),t=k(),{createToastMessage:e}=l();return d(n=>L(n),{onSuccess:({shared_id:n})=>{a.invalidateQueries([c.locker,n]),e("쉐어 신청 완료 !","success"),t(y.MAIN)},onError:()=>e("다시 시도해주세요.","error")})};export{v as a,_ as b,S as c,M as d,A as u};
