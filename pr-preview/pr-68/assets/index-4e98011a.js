import{c as a,a as k,j as n,b as r,i as z,f as M,g as T,u as E,r as l,d as j,L as R,F as y,P as L}from"./index-5dcac323.js";import{I as F,u as H,M as N,a as B,B as G,P as O}from"./index-8f712591.js";import{g as Q}from"./building-925df4bd.js";import{P as h,a as Y}from"./index-13c30a6e.js";const $=a("div",{target:"eoglrl06"})("display:flex;justify-content:center;flex-direction:column;align-items:center;padding:0 30px;",({theme:t})=>k("min-height:calc(var(--vh, 1vh) * 100 - ",t.layouts.fixedHeight,");",""),";"),D=a("h1",{target:"eoglrl05"})("font-size:30px;font-weight:bold;margin-bottom:10px;color:",({theme:t})=>t.colors.primary_200,";"),J=a("table",{target:"eoglrl04"})("width:100%;margin-top:15px;border-collapse:collapse;& tr>td,& tr>th{padding:10px 5px;white-space:nowrap;&:first-of-type{padding-left:10px;}}& tbody tr{border-bottom:1px solid ",({theme:t})=>t.colors.light_grey_100,";}"),K=a("h1",{target:"eoglrl03"})({name:"lykxvs",styles:"display:flex;font-size:18px;justify-content:center;margin:150px 0"}),U=a("div",{target:"eoglrl01"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),q=a("textarea",{target:"eoglrl00"})("margin-top:5%;width:100%;height:80%;resize:none;padding:5px;border:1px solid ",({theme:t})=>t.colors.light_grey_100,";border-radius:5px;"),V=({contents:t,handleContent:o})=>n("tbody",{children:t.map(e=>r(s.Row,{children:[n(s.Item,{children:e.locker_number}),n(s.Item,{children:Q(e.building_id)}),n(s.Item,{children:e.user}),n(s.Item,{children:e.user_name}),n(s.IconItem,{onClick:()=>o(e.id),children:n(F,{iconName:"bell",size:"20"})})]},e.id))}),s={Row:a("tr",{target:"eb1eze72"})({name:"suclo2",styles:"font-size:14px;padding:10px;width:100%"}),Item:a("td",{target:"eb1eze71"})({name:"7lr3li",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"}),IconItem:a("td",{target:"eb1eze70"})("display:flex;flex-direction:column;align-items:center;transition:0.1s color ease-in-out;cursor:pointer;&:hover svg path{stroke:",({theme:t})=>t.colors.secondary_200,";}")},W=t=>{const{headers:o}=t;return n(b.Head,{children:n("tr",{children:o.map(e=>n(b.Item,{children:e},e))})})},b={Head:a("thead",{target:"e69wk4o1"})("font-size:16px;font-weight:bold;background-color:",({theme:t})=>t.colors.primary_200,";border-radius:5px;"),Item:a("th",{target:"e69wk4o0"})({name:"7lr3li",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"})},X=async t=>{const o=t||0,{data:e}=await z.get(`assign/${o}`);return e},Z={assign:"assignResult"},ee=t=>{const{createToastMessage:o}=M(),{data:e,isLoading:c}=T(Z.assign,()=>X(t),{onError:()=>{o("오류가 발생했습니다.","error")}});return{data:e,isLoading:c}},te=["사물함","건물","학번","이름","알림"],re=()=>{const{me:t}=E(),{mutate:o}=H(),{data:e,isLoading:c}=ee(N[(t==null?void 0:t.major)??"학과"]),[d,w]=l.useState(1),[p,m]=l.useState(""),[u,x]=l.useState(null),[g,v]=l.useState(null),I=j(),A=()=>{o({receiver:(g==null?void 0:g.user)??0,message:p}),I(L.ASSIGN),f()},S=i=>{x(i);const P=e==null?void 0:e.find(_=>_.id==i);v(P??null)},f=()=>{x(null),m("")},C=i=>{m(i.target.value)};return n(O,{children:r($,{children:[n(D,{children:"사물함 최종 배정 결과"}),c?n(R,{}):n(y,{children:e&&e.length===0?n(K,{children:"사물함 배정 기간이 아닙니다."}):r(y,{children:[r(J,{children:[n(W,{headers:te}),n(V,{contents:(e==null?void 0:e.slice((d-1)*h,d*h))||[],handleContent:S})]}),n(U,{children:n(Y,{currentPage:d,totalItems:(e==null?void 0:e.length)||0,itemsPerPage:h,setState:w})}),u!==null&&r(B,{title:"개별 알림",onClose:f,open:!!u,children:[n(q,{onChange:C,value:p,placeholder:"보낼 알림을 입력하세요."}),n(G,{variant:"contained",color:"primary",onClick:A,children:"알림 보내기"})]})]})})]})})};export{re as default};
