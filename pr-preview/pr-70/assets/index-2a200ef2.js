import{c as i,a as N,r as S,j as r,b as n,l as R,u as j,f as q,d as P,P as V}from"./index-03839a0b.js";import{B as L}from"./index-3b80971c.js";import{I as D,M as k,P as E,a as G}from"./index-4eafb9d1.js";import{S as z}from"./index-59ddcfdc.js";import{S as W}from"./index-1d74feb7.js";import{B as O}from"./building-925df4bd.js";import{u as H}from"./useInput-7bd24c45.js";import{e as I,f as X,g as $}from"./locker-3b54fc07.js";import{u as K}from"./major-9119ca5e.js";const J=i("section",{target:"e1a6068d3"})("display:flex;flex-direction:column;justify-content:center;padding:0 30px;",({theme:e})=>N("min-height:calc(var(--vh, 1vh) * 100 - ",e.layouts.fixedHeight,");",""),";"),U=i("div",{target:"e1a6068d2"})("display:grid;grid-template-rows:350px 1fr;width:100%;height:450px;background-color:",({theme:e})=>e.colors.white_300,";border:1px solid ",({theme:e})=>e.colors.light_grey_100,";border-radius:5px;margin-bottom:30px;"),Q=i("div",{target:"e1a6068d0"})("display:flex;flex-direction:column;justify-content:space-evenly;align-items:flex-start;width:100%;padding:0 10px;border-top:1px solid ",({theme:e})=>e.colors.light_grey_100,";background-color:",({theme:e})=>e.colors.background_2,";&>div{display:flex;align-items:center;width:100%;height:24px;&:last-of-type{padding:0 10px;}}"),Y=e=>{const{majorInfo:s,setValue:d,handleApplyButton:l}=e,[g,p]=S.useState(!0);if(!s)return r("span",{children:"ì¶”ê°€ ì¡°ê±´ì´ ì—†ìŠµë‹ˆë‹¤!"});const u=Object.entries(s).filter(([o,a])=>a&&o!=="is_baserule_FCFS"),t=o=>{if(o.target.type==="checkbox")return o.target.checked||!1;const a=Number(o.target.value);if(a<0)alert("0 ì´ìƒì¸ ê°’ë§Œ ìž…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤."),o.target.value="";else return a},f=(o,a)=>{const x=t(o);d(b=>{const h={...{...b},[`${a}_answer`]:x},_=u.every(([v])=>{const y=h[`${v}_answer`];return y!=null&&y!==""});return p(!_),h})};return n(m.Root,{children:[n("div",{children:[n(m.Description,{children:["ë™ì ìžëŠ” ",s.is_baserule_FCFS?"ì„ ì°©ìˆœ":"ëžœë¤"," ìš°ì„ ë°°ì •ë©ë‹ˆë‹¤ ðŸ˜Š"]}),r("br",{}),u.length?u.map(([o,a],x)=>n(m.ConditionWrapper,{children:[n(m.Name,{children:[x+1,"ìˆœìœ„: ",a.name]}),a.is_bool?n(m.Label,{children:[r(m.Input,{type:"checkbox",onChange:b=>f(b,o)}),r("span",{className:"slider"})]}):r(m.Input,{type:"number",placeholder:a.question,onChange:b=>f(b,o)})]},o)):null]}),r(L,{variant:"contained",onClick:l,disabled:g,children:g?"ì‹ ì²­ ê¸°ê°„ì´ ì•„ë‹™ë‹ˆë‹¤!":"ì‹ ì²­"})]})},m={Root:i("div",{target:"euooqhp5"})({name:"14ggdrv",styles:"height:100%;display:flex;flex-direction:column;justify-content:space-between"}),ConditionWrapper:i("div",{target:"euooqhp4"})({name:"r3aoht",styles:"width:100%;margin-bottom:25px"}),Name:i("div",{target:"euooqhp3"})({name:"oub90b",styles:"margin-bottom:10px;font-size:15px"}),Label:i("label",{target:"euooqhp2"})("position:relative;display:inline-block;width:60px;height:29px;& input{opacity:0;width:0;height:0;}& .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc;-webkit-transition:0.4s;transition:0.4s;border-radius:29px;}& .slider:before{position:absolute;content:'';height:21px;width:21px;left:4px;bottom:4px;background-color:white;-webkit-transition:0.4s;transition:0.4s;border-radius:50%;}& input:checked+.slider{background-color:",({theme:e})=>e.colors.primary_200,";}& input:focus+.slider{box-shadow:0 0 1px ",({theme:e})=>e.colors.primary_300,";}& input:checked+.slider:before{-webkit-transform:translateX(31px);-ms-transform:translateX(31px);transform:translateX(31px);}"),Input:i("input",{target:"euooqhp1"})({name:"1l2d352",styles:"width:100%;padding:10px 5px;&::placeholder{font-size:14px;}"}),Description:i("p",{target:"euooqhp0"})("color:",({theme:e})=>e.colors.grey_300,";font-size:15px;text-align:center;")},T={not_building:"ê±´ë¬¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.",not_login:"ë¡œê·¸ì¸ í›„ ì‚¬ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤!"},Z=e=>{const{me:s,value:d,total:l,applyCount:g}=e,p=R();if(!s||!l){const t=s?T.not_building:T.not_login;return n(c.Root,{children:[r(D,{iconName:"nothing",size:"100",color:p.colors.grey_200,hasCursor:!1}),r("span",{style:{color:p.colors.grey_200},children:t})]})}const u=Math.ceil(g/l*100);return n(c.Root,{children:[r(c.GradientWrapper,{children:n(c.Building,{grd:u>100?100:u,children:[r(c.Floor,{}),r(c.Floor,{}),r(c.Floor,{}),r(c.Floor,{}),r(c.Floor,{})]})}),n(c.Title,{children:[d," ( ",g," / ",l," )"]})]})},c={Root:i("div",{target:"e166tayl4"})({name:"l768v7",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px;width:100%"}),Building:i("div",{target:"e166tayl3"})("display:grid;grid-template-rows:repeat(5, 1fr);border-radius:5px;",({grd:e})=>N("height:",100-e,"%;background:white;",""),";"),GradientWrapper:i("div",{target:"e166tayl2"})({name:"1ncgd1x",styles:"background-color:#2cb67d"}),Floor:i("div",{target:"e166tayl1"})("width:100px;height:50px;background-color:transparent;border:5px solid ",({theme:e})=>e.colors.light_grey_200,";"),Title:i("h1",{target:"e166tayl0"})("")},ee=(e=!1)=>{const[s,d]=S.useState(e);return{open:s,handleOpen:()=>d(!s),setOpen:d}},pe=()=>{var y,F,A;const{me:e}=j(),{open:s,handleOpen:d}=ee(),{createToastMessage:l}=q(),g=P();if(!e)return l("ë¡œê·¸ì¸ì„ ë‹¤ì‹œ í•´ì£¼ì„¸ìš”!","error"),g(V.LOGIN),r("div",{});const[p,u]=S.useState("ê±´ë¬¼"),{majorInfo:t}=K(k[e.major],!0),{value:f,setValue:o}=H({priority_1_answer:((y=t==null?void 0:t.priority_1)==null?void 0:y.is_bool)&&!1,priority_2_answer:((F=t==null?void 0:t.priority_2)==null?void 0:F.is_bool)&&!1,priority_3_answer:((A=t==null?void 0:t.priority_3)==null?void 0:A.is_bool)&&!1}),{applicableBuildings:a}=I(k[e.major]),{mutate:x}=X(),b=w=>u(w.currentTarget.innerText),{data:{apply:C,lockerCounts:h}}=$({major:k[e.major],building_id:O[p]}),_=()=>{if(!e)return l("ë¡œê·¸ì¸ í›„ ì‚¬ìš©í•´ì£¼ì„¸ìš”!","error");if(!(h!=null&&h.length))return l("í•´ë‹¹ ê±´ë¬¼ì—ëŠ” ì‚¬ë¬¼í•¨ì´ ì—†ìŠµë‹ˆë‹¤!","error");t||v(),d()},v=()=>{var w,B,M;x({building_id:O[p],major:k[e.major],user:e.id,...f}),o({priority_1_answer:((w=t==null?void 0:t.priority_1)==null?void 0:w.is_bool)&&!1,priority_2_answer:((B=t==null?void 0:t.priority_2)==null?void 0:B.is_bool)&&!1,priority_3_answer:((M=t==null?void 0:t.priority_3)==null?void 0:M.is_bool)&&!1}),_()};return n(E,{children:[n(J,{children:[n(U,{children:[r(Z,{me:e,value:p,total:h?h.length:void 0,applyCount:C?C.length:void 0}),n(Q,{children:[r(z,{value:p,handleChange:b,list:a}),r(W,{}),r("div",{children:e.major||"í•™ê³¼"})]})]}),r(L,{variant:"contained",onClick:_,children:"ì‹ ì²­í•˜ê¸°"})]}),r(G,{title:"í•™ê³¼ë³„ ì¡°ê±´ ìž…ë ¥",open:s,onClose:_,children:e&&r(Y,{majorInfo:t,setValue:o,handleApplyButton:v})})]})};export{pe as default};
