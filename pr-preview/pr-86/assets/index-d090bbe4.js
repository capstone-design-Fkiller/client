import{c as d,a as R,d as j,u as x,j as t,b as n,P as p,F as s,L as k,m as T}from"./index-3201da87.js";import{B as h}from"./index-d9fd8ef7.js";import{M as C,I as u,P as M,Y as g,a as b,f as D,g as A}from"./index-2f8074b8.js";import{u as B}from"./assign-8a3984c5.js";import{g as w}from"./building-925df4bd.js";import{d as F,u as P,c as E}from"./locker-3e869126.js";const N=d("section",{target:"e377ic81"})("display:flex;flex-direction:column;justify-content:center;padding:0 30px;gap:20px;",({theme:r})=>R("min-height:calc(var(--vh, 1vh) * 100 - ",r.layouts.fixedHeight,");",""),";"),L=()=>{const r=j(),{me:a}=x(),{data:e}=B(C[(a==null?void 0:a.major)??"학과"]);return t(M,{children:t(N,{children:a?n(s,{children:[t(h,{variant:"contained",startIcon:t(u,{iconName:"box"}),onClick:()=>r(p.CRITERIA),children:"사물함 배정기준 설정"}),(e==null?void 0:e.at(0))??void 0?t(s,{children:t(h,{variant:"outlined",color:"error",disableFocusRipple:!0,disableTouchRipple:!0,disabled:!0,children:"사물함 배정 불가"})}):t(h,{variant:"contained",startIcon:t(u,{iconName:"box"}),onClick:()=>r(p.SORT),children:"사물함 배정 확정"}),t(h,{variant:"contained",startIcon:t(u,{iconName:"box"}),onClick:()=>r(p.RESULT),children:"이번 학기 사물함 신청내역"})]}):t(k,{})})})},q=d("div",{target:"el43r1n3"})({name:"1e3x3sk",styles:"display:flex;flex-direction:column;width:100%;margin-bottom:30px"}),z=d("div",{target:"e1s505tl2"})("display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:center;padding:0 15px;margin-bottom:30px;border:1px solid ",({theme:r})=>r.colors.light_grey_200,";border-bottom-left-radius:5px;border-bottom-right-radius:5px;height:150px;&.none{display:flex;justify-content:center;text-align:center;}"),H=d("div",{target:"e1s505tl1"})({name:"1n1dqqm",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:6px"}),U=d("div",{target:"e1s505tl0"})("display:flex;align-items:center;padding:0 15px;justify-content:center;color:",({theme:r})=>r.colors.white_300,";background-color:",({theme:r})=>r.colors.primary_200,";border-top-left-radius:5px;border-top-right-radius:5px;height:40px;"),l=r=>{const{label:a,value:e}=r;return n(v.InfoRow,{children:[n(v.InfoLabel,{children:[a,":"]}),t("p",{children:e})]})},v={InfoRow:d("div",{target:"eedo7o31"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),InfoLabel:d("p",{target:"eedo7o30"})({name:"nn32so",styles:"font-weight:bold;margin-right:8px"})},y=r=>{const{locker:a,userId:e,me:i,shareType:c}=r,{user:o}=T(e??0);return n(s,{children:[t(U,{children:"[ 쉐어 정보 ]"}),n(z,{className:a?"grid":"none",children:[t(u,{iconName:"share",size:"70",hasCursor:!1}),n(H,{children:[t(l,{label:c,value:`${o==null?void 0:o.name}`}),t(l,{label:"학과",value:`${o==null?void 0:o.major}`}),a.owned_id===i.id&&t(s,{children:a.shared_id?n(s,{children:[t(l,{label:"쉐어 시작일",value:a.share_start_date?g(a.share_start_date):"-"}),t(l,{label:"쉐어 반납일",value:a.share_end_date?g(a.share_end_date):"-"}),t("p",{children:"사물함 이용중"})]}):t(l,{label:"쉐어등록여부",value:a.is_share_registered?"✔️":"❌"})})]})]})]})},_=d("div",{target:"e1os9kl82"})("display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:center;padding:0 15px;margin-bottom:30px;border:1px solid ",({theme:r})=>r.colors.light_grey_200,";border-bottom-left-radius:5px;border-bottom-right-radius:5px;height:150px;&.flex{display:flex;justify-content:center;text-align:center;}&.none{display:flex;justify-content:center;text-align:center;flex-direction:column;}"),S=d("div",{target:"e1os9kl81"})({name:"1n1dqqm",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:6px"}),f=d("div",{target:"e1os9kl80"})("display:flex;align-items:center;padding:0 15px;justify-content:center;color:",({theme:r})=>r.colors.white_300,";background-color:",({theme:r})=>r.colors.primary_200,";border-top-left-radius:5px;border-top-right-radius:5px;height:40px;"),I=r=>{const{start_label:a,start_date:e,end_label:i,end_date:c}=r;return console.log(e),n(s,{children:[t(l,{label:a,value:g(e)??"-"}),t(l,{label:i,value:g(c)||"-"})]})},m=r=>{const{locker:a,me:e,applyCheck:i}=r;return a?n(s,{children:[t(f,{children:"[ 내 사물함 ]"}),n(_,{className:"flex",children:[t(u,{iconName:"locker",size:"70",hasCursor:!1}),n(S,{children:[t(l,{label:"사물함 위치",value:`${w(a.building_id)} ${a.floor}층`}),t(l,{label:"사물함 번호",value:`${a.locker_number}번`}),a.owned_id===e.id&&n(s,{children:[t(I,{start_label:"사용 시작일",start_date:a.start_date,end_label:"반납 예정일",end_date:a.end_date}),a.shared_id?t(l,{label:"쉐어중",value:"✔️"}):t(s,{children:t(l,{label:a.is_share_registered?"쉐어등록기간":"쉐어등록여부",value:a.is_share_registered?`${b(a.share_start_date)}~${b(a.share_end_date)}`:"❌"})})]}),a.shared_id===e.id&&n(s,{children:[t(I,{start_label:"쉐어 시작일",start_date:a.share_start_date,end_label:"쉐어 종료일",end_date:a.share_end_date}),t(l,{label:"쉐어 받음",value:"✔️"})]})]})]})]}):n(s,{children:[t(f,{children:"[ 내 사물함 ]"}),n(_,{className:"none",children:[t("p",{children:"배정된 사물함이 없습니다."}),i?"":t("p",{children:"사물함을 신청하세요."}),n("p",{children:["신청 여부 :"," ",t("span",{style:{color:"red",fontWeight:"900"},children:i?"✔️":"❌"})]})]})]})};m.Status=function(a){const{locker:e,applyCheck:i}=a;if(e||!i)return null;const c=D(new Date(i.created_at));return n(s,{children:[t(f,{children:"[ 사물함 신청 정보 ]"}),n(_,{className:"grid",children:[t(u,{iconName:"user",size:"90",hasCursor:!1}),n(S,{children:[t(l,{label:"학과",value:`${A(i.major)}`}),t(l,{label:"신청 위치",value:`${w(i.building_id)}`}),t(l,{label:"신청 날짜",value:`${c}`})]})]})]})};const Y=r=>{const{me:a,locker:e}=r,{data:i}=F(C[a.major],a.id);return n(q,{children:[t(m,{locker:e,me:a,applyCheck:i}),t(m.Status,{locker:e,me:a,applyCheck:i}),(e==null?void 0:e.shared_id)==a.id&&t(y,{locker:e,userId:e==null?void 0:e.owned_id,me:a,shareType:"빌려준 사람"}),(e==null?void 0:e.owned_id)==a.id&&e.shared_id&&t(y,{locker:e,userId:e==null?void 0:e.shared_id,me:a,shareType:"빌린 사람"})]})},O=()=>{const r=j(),{me:a}=x();if(!a)throw new Error("로그인을 해주세요!");const{myLocker:e}=P(a.id||0),i=$=>{r($)},{mutate:c}=E(),o=()=>{e&&c({id:e.id,share_end_date:null,share_start_date:null})};return t(M,{children:t(N,{children:a&&n(s,{children:[t(Y,{me:a,locker:e}),e&&!(e!=null&&e.shared_id)&&!(e!=null&&e.is_share_registered)&&t(h,{style:{marginTop:"-50px"},variant:"contained",onClick:()=>i(p.USER_SHARE),children:"사물함 쉐어하기"}),(e==null?void 0:e.owned_id)===(a==null?void 0:a.id)&&!(e!=null&&e.shared_id)&&(e==null?void 0:e.is_share_registered)&&t(h,{style:{marginTop:"-50px"},variant:"outlined",onClick:o,children:"쉐어 취소"})]})})})},X=()=>{const{me:r}=x();return r!=null&&r.is_usermode?t(O,{}):t(L,{})};export{X as default};
