import{c as s,a as P,d as C,u as w,j as n,b as t,P as x,F as c,L as z,l as A,m as j}from"./index-2dd2fd0e.js";import{M as S,B as g,P as $,I as u,f as T,Y as o,g as D}from"./index-d15521fd.js";import{u as E}from"./assign-b6792a17.js";import{g as v}from"./building-925df4bd.js";import{u as M,d as H,c as O}from"./locker-e436475e.js";const R=s("section",{target:"e377ic81"})("display:flex;flex-direction:column;justify-content:center;padding:0 30px;gap:20px;",({theme:i})=>P("min-height:calc(var(--vh, 1vh) * 100 - ",i.layouts.fixedHeight,");",""),";"),Y=()=>{const i=C(),{me:a}=w(),{data:e}=E(S[(a==null?void 0:a.major)??"학과"]);return n($,{children:n(R,{children:a?t(c,{children:[n(g,{variant:"contained",onClick:()=>i(x.CRITERIA),children:"사물함 배정기준 설정"}),(e==null?void 0:e.at(0))??void 0?n(c,{children:n(g,{variant:"outlined",color:"error",disableFocusRipple:!0,disableTouchRipple:!0,disabled:!0,children:"사물함 배정 불가"})}):n(g,{variant:"contained",onClick:()=>i(x.SORT),children:"사물함 배정 확정"})]}):n(z,{})})})},W=i=>{const{locker:a,name:e,id:r}=i;if(!a)return n(I.InformBox,{className:"nothing",children:t("div",{className:"nothing-inner",children:[t("div",{className:"inform__user",children:[t("span",{children:["이름: ",e]}),t("span",{children:["학번: ",r]})]}),t("div",{children:[n("p",{children:"아직 배정된 사물함이 없습니다."})," ",n("p",{children:"사물함을 신청하세요"})]})]})});const{major:h,owned_id:l,building_id:_,locker_number:q,shared_id:b,floor:B,is_share_registered:F}=a;return t(I.InformBox,{children:[t("span",{children:["이름: ",e]}),t("span",{children:["학과: ",h]}),t("span",{children:["학번: ",r]}),t("span",{children:["위치: ",B,"층"]}),t("span",{children:["건물: ",v(_)]}),t("span",{children:["사물함 번호: ",q]}),l===r&&n("span",{children:b?`쉐어중 :  ${b}`:`쉐어 등록 여부 : ${F?"✔️":"❌"}`}),b===r&&n("span",{children:"쉐어 받음"})]})},I={InformBox:s("div",{target:"ey0rj9n0"})("display:grid;grid-template-columns:1fr 1fr;justify-items:flex-start;align-items:center;width:100%;padding:0 10px;border-top:1px solid ",({theme:i})=>i.colors.light_grey_100,";background-color:",({theme:i})=>i.colors.background_2,";&.nothing{display:flex;flex-direction:column;justify-content:center;align-items:center;p{color:",({theme:i})=>i.colors.error_100,";}}& .nothing-inner{display:flex;flex-direction:column;justify-content:center;gap:10px;}& .inform__user{display:flex;justify-content:space-between;align-items:center;width:100%;}")},k=({user:i})=>{const{name:a,id:e}=i,{myLocker:r}=M(e);return t(y.Container,{children:[n(y.LockerInfo,{children:n(u,{iconName:"locker",size:"150",hasCursor:!1})}),n(W,{name:a,id:e,locker:r})]})};k.Skeleton=function(){const a=A();return t(y.SkeletonWrapper,{children:[n(u,{iconName:"nothing",size:"100",color:a.colors.grey_200,hasCursor:!1}),n("span",{style:{color:a.colors.grey_200},children:"로그인 후 사용할 수 있습니다!"})]})};const y={Container:s("div",{target:"e152uy8q2"})("display:grid;grid-template-rows:350px 1fr;width:100%;height:450px;background-color:",({theme:i})=>i.colors.white_300,";border:1px solid ",({theme:i})=>i.colors.light_grey_100,";border-radius:5px;"),LockerInfo:s("div",{target:"e152uy8q1"})({name:"t5t5sq",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%"}),SkeletonWrapper:s("div",{target:"e152uy8q0"})("display:flex;flex-direction:column;justify-content:center;align-items:center;gap:30px;width:100%;height:450px;background-color:",({theme:i})=>i.colors.white_300,";border:1px solid ",({theme:i})=>i.colors.light_grey_100,";border-radius:5px;margin-bottom:30px;")},d=i=>{const{label:a,value:e}=i;return t(N.InfoRow,{children:[t(N.InfoLabel,{children:[a,":"]}),n("p",{children:e})]})},N={InfoRow:s("div",{target:"eqxdh7h1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),InfoLabel:s("p",{target:"eqxdh7h0"})({name:"nn32so",styles:"font-weight:bold;margin-right:8px"})},G=s("div",{target:"e1ybte0w2"})({name:"1e3x3sk",styles:"display:flex;flex-direction:column;width:100%;margin-bottom:30px"}),p=s("div",{target:"e1ybte0w1"})("display:grid;grid-template-columns:30% 70%;align-items:center;padding:0 15px;margin-bottom:10px;border:1px solid ",({theme:i})=>i.colors.light_grey_200,";border-radius:5px;height:150px;&.none{display:flex;justify-content:center;text-align:center;}"),m=s("div",{target:"e1ybte0w0"})({name:"1n1dqqm",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:6px"}),f={name:"dhit8z",styles:"margin-left:15px"},J=i=>{const{me:a,locker:e}=i;let r,h;if((e==null?void 0:e.owned_id)==a.id&&e.shared_id){const{user:_}=j(e.shared_id);r=_}else if((e==null?void 0:e.shared_id)==a.id){const{user:_}=j((e==null?void 0:e.owned_id)??a.id);r=_}const{data:l}=H(S[a.major],a.id);return l&&(h=T(new Date(l==null?void 0:l.created_at))),t(G,{children:["내 사물함",n(p,{className:e?"grid":"none",children:e?t(c,{children:[n(u,{iconName:"locker",size:"70",css:f,hasCursor:!1}),t(m,{children:[n(d,{label:"사물함 위치",value:`${v(e.building_id)} ${e.floor}층`}),n(d,{label:"사물함 번호",value:`${e.locker_number}번`}),e.owned_id===a.id&&n(d,{label:"사용 시작일",value:e.start_date?o(e.start_date):"-"}),e.owned_id===a.id&&n(d,{label:"반납 예정일",value:e.end_date?o(e.end_date):"-"}),e.shared_id===a.id&&n(d,{label:"쉐어 시작일",value:e.share_start_date?o(e.share_start_date):"-"}),e.shared_id===a.id&&n(d,{label:"쉐어 반납일",value:e.share_end_date?o(e.share_end_date):"-"}),e.owned_id===a.id&&(e.shared_id?n(d,{label:"쉐어중",value:"✔️"}):n(d,{label:"쉐어등록여부",value:e.is_share_registered?"✔️":"❌"})),e.shared_id===a.id&&n(d,{label:"쉐어 받음",value:"✔️"})]})]}):l?n("p",{children:"신청중"}):t("p",{children:["배정된 사물함이 없습니다. ",n("br",{})," 사물함을 신청하세요."]})}),!e&&l?t(c,{children:["신청 상태",t(p,{className:e?"grid":"none",children:[n(u,{iconName:"user",size:"70",css:f,hasCursor:!1}),t(m,{children:[n(d,{label:"학과",value:`${D(l.major)}`}),n(d,{label:"신청 위치",value:`${v(l.building_id)}`}),n(d,{label:"신청 날짜",value:`${h}`})]})]})]}):void 0,(e==null?void 0:e.owned_id)==a.id&&e.shared_id?t(c,{children:["쉐어 이용자",t(p,{className:e?"grid":"none",children:[n(u,{iconName:"share",size:"70",css:f,hasCursor:!1}),t(m,{children:[n(d,{label:"빌린 학우",value:`${r==null?void 0:r.name}`}),n(d,{label:"학과",value:`${r==null?void 0:r.major}`}),n(d,{label:"쉐어 시작일",value:e.share_start_date?o(e.share_start_date):"-"}),n(d,{label:"쉐어 반납일",value:e.share_end_date?o(e.share_end_date):"-"})]})]})]}):void 0,(e==null?void 0:e.shared_id)==a.id?t(c,{children:["쉐어 대여자",t(p,{className:e?"grid":"none",children:[n(u,{iconName:"user",size:"70",css:f,hasCursor:!1}),t(m,{children:[n(d,{label:"빌려준 학우",value:`${r==null?void 0:r.name}`}),n(d,{label:"학과",value:`${r==null?void 0:r.major}`}),n(d,{label:"쉐어 시작일",value:e.share_start_date?o(e.share_start_date):"-"}),n(d,{label:"쉐어 반납일",value:e.share_end_date?o(e.share_end_date):"-"}),e.owned_id===a.id&&(e.shared_id?"사물함 이용중":n(d,{label:"쉐어등록여부",value:e.is_share_registered?"✔️":"❌"}))]})]})]}):void 0]})},L=()=>{const i=C(),{me:a}=w(),{myLocker:e}=M((a==null?void 0:a.id)||0),r=l=>{i(l)},{mutate:h}=O();return n($,{children:n(R,{children:a?t(c,{children:[n(J,{me:a,locker:e}),e&&!(e!=null&&e.shared_id)&&!(e!=null&&e.is_share_registered)&&n(g,{variant:"contained",onClick:()=>r(x.USER_SHARE),children:"사물함 쉐어하기"}),(e==null?void 0:e.owned_id)===(a==null?void 0:a.id)&&!(e!=null&&e.shared_id)&&(e!=null&&e.is_share_registered)?n(g,{variant:"outlined",onClick:()=>h({id:(e==null?void 0:e.id)||0,share_start_date:null,share_end_date:null}),children:"쉐어 취소"}):void 0]}):t(c,{children:[n(k.Skeleton,{}),n(g,{variant:"contained",onClick:()=>r(x.LOGIN),children:"로그인 하러 가기"})]})})})},U=()=>{const{me:i}=w();return i!=null&&i.is_usermode?n(L,{}):n(Y,{})};export{U as default};
