import{m as o,i as u,f as c,g as i,e as p,h as y}from"./index-23d0ad62.js";const d=async a=>{const{data:t}=await o.get("http://127.0.0.1:8000/locker",{params:a});return t},k=async a=>{const{data:t}=await o.get("http://127.0.0.1:8000/apply",{params:a});return t},h=async a=>{const{data:t}=await u.post("apply/",a);return t},g=async a=>{const{data:t}=await o.get(`http://127.0.0.1:8000/locker?major=${a}&is_share_registered=True`);return t},s={apply:"apply",locker:"locker",share:"share"},m=a=>{const t=Object.values(a),{data:n}=c([s.locker,"locker-counts",...t],()=>d(a),{enabled:!!a.building_id&&!!a.major}),{data:e}=c([s.apply,"applicant",...t],()=>k(a),{enabled:!!a.building_id&&!!a.major});return{data:{apply:e,lockerCounts:n}}},w=()=>{const a=i(),{createToastMessage:t}=p();return y(e=>h(e),{onSuccess:({major:e,building_id:r})=>{t("신청 완료 !","success"),a.invalidateQueries([s.apply,"applicant",e,r])},onError:()=>{t("다시 시도해주세요.","error")}})},L=a=>{const{data:t,isLoading:n}=c([s.locker,s.share,"sharable-lockers",a],()=>g(a),{enabled:!!a,onSuccess:e=>{const r=new Date;return e.filter(({end_date:l})=>l&&new Date(l)>r)}});return{sharableLockers:t,isLoading:n}};export{w as a,m as b,L as u};
