import{c as i,a as j,j as e,r as m,b as d,i as w,h as b,g as T,k as R,u as D,e as M,L as A,F as f,P as C}from"./index-b3b1ed4c.js";import{B as E}from"./index-70a21e4a.js";import{I as k,P as F}from"./index-45b2a0e2.js";import{P as h,a as L}from"./index-289c0b12.js";import{a as H}from"./building-ad7d7a51.js";import{M as y}from"./major-a63cf2c8.js";const N=i("div",{target:"e1hp0tas5"})("display:flex;justify-content:center;flex-direction:column;align-items:center;padding:0 30px;",({theme:t})=>j("min-height:calc(var(--vh, 1vh) * 100 - ",t.layouts.fixedHeight,");",""),";"),z=i("h1",{target:"e1hp0tas4"})("font-size:30px;font-weight:bold;margin-bottom:10px;color:",({theme:t})=>t.colors.primary_200,";"),B=i("table",{target:"e1hp0tas3"})("width:100%;margin-top:15px;border-collapse:collapse;& tr>td,& tr>th{padding:10px 5px;white-space:nowrap;&:first-of-type{padding-left:10px;}}& tbody tr{border-bottom:1px solid ",({theme:t})=>t.colors.light_grey_100,";}"),q=i("h1",{target:"e1hp0tas2"})({name:"r7jam2",styles:"display:flex;font-size:18px;justify-content:center"}),$=i("div",{target:"e1hp0tas0"})({name:"1t3ivjg",styles:"display:flex;justify-content:center;margin-bottom:20px"}),G=({contents:t,handleDelete:s})=>{const o=r=>r===null?"-":typeof r=="boolean"?r.toString():r,n=r=>{confirm("정말 삭제하시겠습니까?")&&s(r)};return e("tbody",{children:t.map(r=>e(m.Fragment,{children:d(c.Row,{children:[e(c.Item,{children:r.id}),e(c.Item,{children:o(r.priority_1_answer)}),e(c.Item,{children:o(r.priority_2_answer)}),e(c.Item,{children:o(r.priority_3_answer)}),e(c.Item,{children:H[r.building_id]}),e(c.IconItem,{onClick:()=>n(r.id),children:e(k,{iconName:"trashcan",size:"18"})})]})},r.id))})},c={Row:i("tr",{target:"efwokpf2"})("font-size:14px;padding:10px;width:100%;transition:0.1s color ease-in-out;&:hover{background-color:",({theme:t})=>t.colors.light_grey_100,";}"),Item:i("td",{target:"efwokpf1"})({name:"7lr3li",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"}),IconItem:i("td",{target:"efwokpf0"})("display:flex;flex-direction:column;align-items:center;cursor:pointer;&:hover svg path{stroke:",({theme:t})=>t.colors.error_100,";}")},O=t=>{const{headers:s}=t;return e(x.Head,{children:e("tr",{children:s.map(o=>e(x.Item,{children:o},o))})})},x={Head:i("thead",{target:"ens05cg1"})("width:100%;font-size:16px;font-weight:bold;background-color:",({theme:t})=>t.colors.primary_200,";border-radius:5px;"),Item:i("th",{target:"ens05cg0"})({name:"7lr3li",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"})},J=async t=>{const s=t||0,{data:o}=await w.get(`sort/${s}`);return o},Q=async(t,s)=>{const o=t||0,{data:n}=await w.post(`assign/${o}`,s);return n},U=t=>{const{createToastMessage:s}=b(),{data:o,isLoading:n}=T("sortResult",()=>J(t),{onError:()=>{s("오류가 발생했습니다.","error")}});return{data:o,isLoading:n}},K=()=>{const{createToastMessage:t}=b(),s=R(({major:n,sortResult:r})=>Q(n,r),{onSuccess:()=>{t("배정 확정 완료!.","success")},onError:()=>{t("다시 시도해주세요.","error")}});return{resultData:async(n,r)=>{try{await s.mutateAsync({major:n,sortResult:r})}catch(a){console.log(a)}}}},V=["ID","1순위","2순위","3순위","건물","삭제"],rt=()=>{const{me:t}=D(),s=M(),{data:o,isLoading:n}=U(y[t.major]),{resultData:r}=K(),[a,I]=m.useState(o),[p,v]=m.useState(1),_=g=>{I(l=>l==null?void 0:l.filter(P=>P.id!==g))},S=()=>{const l={list:(a==null?void 0:a.map(u=>u.id))||[]};r(y[t.major],l),s(C.MAIN)};return e(F,{children:d(N,{children:[e(z,{children:"사물함 배정 예상 결과"}),n?e(A,{}):e(f,{children:o&&o.length===0?e(q,{children:"사물함 신청자가 없습니다."}):d(f,{children:[d(B,{children:[e(O,{headers:V}),e(G,{contents:(a==null?void 0:a.slice((p-1)*h,p*h))||[],handleDelete:_})]}),e($,{children:e(L,{currentPage:p,totalItems:(a==null?void 0:a.length)||0,itemsPerPage:h,setState:v})}),e(E,{variant:"contained",color:"primary",onClick:S,children:"배정 확정하기"})]})})]})})};export{rt as default};
