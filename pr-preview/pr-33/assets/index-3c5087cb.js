import{_ as M,d as b,g as w,n as O,S as E,R as h,p as T,e as C,f as N,c as p,a as U,r as R,u as I,j as c,b as m}from"./index-5478a83e.js";import{B as y,P as _}from"./index-fd4e317b.js";import{s as L,i as D}from"./instance-64597158.js";var k=function(n){M(i,n);function i(r,e){var t;return t=n.call(this)||this,t.client=r,t.setOptions(e),t.bindMethods(),t.updateResult(),t}var s=i.prototype;return s.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},s.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},s.onUnsubscribe=function(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}},s.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)},s.getCurrentResult=function(){return this.currentResult},s.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},s.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,b({},this.options,{variables:typeof e<"u"?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},s.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:w(),t=b({},e,{isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},s.notify=function(e){var t=this;O.batch(function(){t.mutateOptions&&(e.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(l){l(t.currentResult)})})},i}(E);function z(n,i,s){var r=h.useRef(!1),e=h.useState(0),t=e[1],l=T(n,i,s),f=C(),u=h.useRef();u.current?u.current.setOptions(l):u.current=new k(f,l);var o=u.current.getCurrentResult();h.useEffect(function(){r.current=!0;var v=u.current.subscribe(O.batchCalls(function(){r.current&&t(function(g){return g+1})}));return function(){r.current=!1,v()}},[]);var a=h.useCallback(function(v,g){u.current.mutate(v,g).catch(N)},[]);if(o.error&&L(void 0,u.current.options.useErrorBoundary,[o.error]))throw o.error;return b({},o,{mutate:a,mutateAsync:o.mutate})}const j=p("div",{target:"e1w3ycz04"})("display:flex;justify-content:center;flex-direction:column;align-items:center;padding:0 30px;",({theme:n})=>U("min-height:calc(var(--vh, 1vh) * 100 - ",n.layouts.fixedHeight,");",""),";"),A=p("h1",{target:"e1w3ycz03"})("font-size:30px;margin-bottom:50px;color:",({theme:n})=>n.colors.primary_200,";"),P=p("form",{target:"e1w3ycz02"})({name:"1yxf6qu",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center"}),B=p("div",{target:"e1w3ycz01"})({name:"14nnqif",styles:"display:grid;gap:10px;grid-template-columns:1fr 1fr;width:100%;margin-bottom:10px"}),x=p("input",{target:"e1w3ycz00"})("padding:15px 10px;width:100%;font-size:14px;margin-bottom:10px;border:none;border-radius:5px;box-shadow:",({theme:n})=>n.shadow.type_1,";"),S=n=>{const[i,s]=R.useState(n),r=R.useCallback(e=>{s(e.target.value)},[]);return{value:i,handleValue:r,setValue:s}},V=async n=>await D.post("login/",n),q=()=>z(i=>V(i)),d={STUDENT:"student",ADMIN:"admin"};function G(){I();const[n,i]=R.useState(d.STUDENT),{value:s,handleValue:r}=S(""),{value:e,handleValue:t}=S(""),{mutate:l}=q(),f=a=>{i(a)},u=()=>{l({is_usermode:d.STUDENT===n,id:s,password:e},{onSuccess:o})},o=({data:a})=>{console.log(a),localStorage.setItem("refresh",JSON.stringify(a.refresh_token)),localStorage.setItem("access",JSON.stringify(a.access_token))};return c(_,{children:m(j,{children:[c(A,{children:"HUFS LOCKER"}),m(P,{children:[m(B,{children:[c(y,{variant:n===d.STUDENT?"contained":"outlined",onClick:()=>f(d.STUDENT),children:"학생 로그인"}),c(y,{variant:n===d.ADMIN?"contained":"outlined",onClick:()=>f(d.ADMIN),children:"관리자 로그인"})]}),m("div",{children:[c(x,{type:"text",placeholder:"아이디를 입력해주세요.",value:s,name:"username",autoFocus:!0,onChange:r}),c(x,{type:"password",placeholder:"비밀번호를 입력해주세요.",value:e,name:"password",onChange:t})]}),c(y,{variant:"outlined",onClick:u,children:"LOGIN"})]})]})})}export{G as default};
