import{c as s,a as P,j as t,r as f,b as p,L as D,F as E,u as L,d as M,P as T}from"./index-c40880bc.js";import{B as R}from"./index-d092c51a.js";import{Y as A,I as C,M as g,P as F}from"./index-67e36521.js";import{a as S}from"./building-925df4bd.js";import{T as j,P as u,a as k}from"./index-c24a56a1.js";import{u as z}from"./major-4c3b396b.js";import{u as q,a as B}from"./sort-8f0c0a11.js";const H=s("div",{target:"e1hp0tas2"})("display:flex;justify-content:center;flex-direction:column;align-items:center;padding:0 30px;",({theme:e})=>P("min-height:calc(var(--vh, 1vh) * 100 - ",e.layouts.fixedHeight,");",""),";"),N=s("h1",{target:"e1hp0tas1"})("font-size:25px;font-weight:bold;margin-bottom:10px;color:",({theme:e})=>e.colors.primary_200,";"),O=s("div",{target:"e1hp0tas0"})("font-size:14px;font-weight:400;text-align:center;margin-bottom:5px;color:",({theme:e})=>e.colors.grey_300,";"),Y=s("table",{target:"e1o1mye43"})("width:100%;margin-top:15px;border-collapse:collapse;& tr>td,& tr>th{padding:10px 5px;white-space:nowrap;&:first-of-type{padding-left:10px;}}& tbody tr{border-bottom:1px solid ",({theme:e})=>e.colors.light_grey_100,";}"),G=s("h1",{target:"e1o1mye42"})({name:"lykxvs",styles:"display:flex;font-size:18px;justify-content:center;margin:150px 0"}),J=({contents:e,handleDelete:i})=>{const o=r=>r===null?"-":typeof r=="boolean"?r?"O":"X":r,n=r=>{confirm("정말 삭제하시겠습니까?")&&i(r)};return t("tbody",{children:e.map(r=>t(f.Fragment,{children:p(a.Row,{children:[t(a.Item,{children:r.user}),t(a.Item,{children:o(r.priority_1_answer)}),t(a.Item,{children:o(r.priority_2_answer)}),t(a.Item,{children:o(r.priority_3_answer)}),t(a.Item,{children:A(r.created_at,!0)}),t(a.Item,{children:S(r.building_id)}),t(a.IconItem,{onClick:()=>n(r.id),children:t(C,{iconName:"trashcan",size:"18"})})]})},r.id))})},a={Row:s("tr",{target:"euuqw8s2"})("font-size:13px;padding:10px;width:100%;transition:0.1s color ease-in-out;&:hover{background-color:",({theme:e})=>e.colors.light_grey_100,";}"),Item:s("td",{target:"euuqw8s1"})({name:"7lr3li",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"}),IconItem:s("td",{target:"euuqw8s0"})("display:flex;flex-direction:column;align-items:center;cursor:pointer;&:hover svg path{stroke:",({theme:e})=>e.colors.error_100,";}")},X=["학번","1st","2nd","3rd","신청시간","건물","삭제"],K=e=>{const{currentPage:i,setCurrentPage:o,currentSort:n,handleDelete:r,isLoading:c,sorts:h}=e;return c?t(D,{}):h&&!h.length?t(G,{children:"사물함 신청자가 없습니다."}):p(E,{children:[p(Y,{children:[t(j,{headers:X}),t(J,{contents:(n==null?void 0:n.slice((i-1)*u,i*u))||[],handleDelete:r})]}),t(k,{currentPage:i,totalItems:(n==null?void 0:n.length)||0,itemsPerPage:u,setState:o})]})},te=()=>{const{me:e}=L();if(!e)throw new Error;const i=M(),{data:o,isLoading:n}=q(g[(e==null?void 0:e.major)??"학과"]),{mutate:r}=B(),[c,h]=f.useState(o),[y,w]=f.useState(1),{majorInfo:l}=z(g[e.major],!1),_=()=>{if(!(l!=null&&l.apply_end_date))throw new Error;if(new Date(l==null?void 0:l.apply_end_date)<=new Date)return!0},b=m=>{h(d=>d==null?void 0:d.filter(I=>I.id!==m))},v=()=>{const m=c==null?void 0:c.map(x=>x.id);confirm("확정 후엔 변경이 불가합니다.")&&(r({major:g[e.major],sortResult:{list:m||[]}}),i(T.MAIN))};return t(F,{children:p(H,{children:[t(N,{children:"사물함 배정 예상 결과"}),p(O,{children:[t("p",{children:"사물함 신청이 끝나면 배정 확정 버튼이 활성화됩니다."}),t("p",{children:"페이지를 나가면 변경사항이 모두 사라집니다."})]}),t(K,{isLoading:n,sorts:o,currentSort:c,currentPage:y,setCurrentPage:w,handleDelete:b}),_()&&t(R,{variant:"contained",color:"primary",onClick:v,children:"배정 확정하기"})]})})};export{te as default};
