import{c as a,a as P,j as n,b as s,i as S,f as _,g as k,u as z,r as h,d as M,L as T,F as f,P as E}from"./index-d877f31a.js";import{I as j,u as L,M as R,a as F,B as H,P as N}from"./index-e6212521.js";import{g as B}from"./building-34ad378b.js";import{P as p,a as G}from"./page_offset-f93c3ccd.js";const O=a("div",{target:"eoglrl06"})("display:flex;justify-content:center;flex-direction:column;align-items:center;padding:0 30px;",({theme:t})=>P("min-height:calc(var(--vh, 1vh) * 100 - ",t.layouts.fixedHeight,");",""),";"),Q=a("h1",{target:"eoglrl05"})("font-size:30px;font-weight:bold;margin-bottom:10px;color:",({theme:t})=>t.colors.primary_200,";"),Y=a("table",{target:"eoglrl04"})("display:grid;align-items:center;width:100%;margin-top:15px;border-collapse:collapse;& tr>td,& tr>th{padding:10px 5px;white-space:nowrap;&:first-of-type{padding-left:10px;}}& tbody tr{border-bottom:1px solid ",({theme:t})=>t.colors.light_grey_100,";}"),$=a("h1",{target:"eoglrl03"})({name:"r77xyq",styles:"display:flex;font-size:18px;justify-content:center;margin-top:100px;margin-bottom:100px"}),q=a("div",{target:"eoglrl01"})({name:"zl1inp",styles:"display:flex;justify-content:center"}),D=a("textarea",{target:"eoglrl00"})("margin-top:5%;width:100%;height:80%;resize:none;padding:5px;border:1px solid ",({theme:t})=>t.colors.light_grey_100,";border-radius:5px;"),J=({contents:t,handleContent:o})=>n("tbody",{children:t.map(e=>s(r.Row,{children:[n(r.Item,{children:e.locker}),n(r.Item,{children:B(e.building_id)}),n(r.Item,{children:e.user}),n(r.Item,{children:e.user_name}),n(r.IconItem,{onClick:()=>o(e.id),children:n(j,{iconName:"bell",size:"18"})})]},e.id))}),r={Row:a("tr",{target:"eb1eze72"})({name:"suclo2",styles:"font-size:14px;padding:10px;width:100%"}),Item:a("td",{target:"eb1eze71"})({name:"ay447x",styles:"width:25%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"}),IconItem:a("td",{target:"eb1eze70"})("display:flex;flex-direction:column;align-items:center;transition:0.1s color ease-in-out;cursor:pointer;&:hover svg path{stroke:",({theme:t})=>t.colors.secondary_200,";}")},K=t=>{const{headers:o}=t;return n(b.Head,{children:n("tr",{children:o.map(e=>n(b.Item,{children:e},e))})})},b={Head:a("thead",{target:"e69wk4o1"})("font-size:16px;font-weight:bold;background-color:",({theme:t})=>t.colors.primary_200,";border-radius:5px;"),Item:a("th",{target:"e69wk4o0"})({name:"ay447x",styles:"width:25%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center"})},U=async t=>{const o=t||0,{data:e}=await S.get(`assign/${o}`);return e},V={assign:"assignResult"},W=t=>{const{createToastMessage:o}=_(),{data:e,isLoading:i}=k(V.assign,()=>U(t),{onError:()=>{o("오류가 발생했습니다.","error")}});return{data:e,isLoading:i}},X=["사물함","건물","학번","이름","알림"],ae=()=>{const{me:t}=z(),{mutate:o}=L(),{data:e,isLoading:i}=W(R[(t==null?void 0:t.major)??"학과"]),[l,w]=h.useState(1),[m,u]=h.useState(""),[c,x]=h.useState(null),d=e==null?void 0:e.at(c??0),v=M(),I=()=>{o({receiver:(d==null?void 0:d.user)??0,message:m}),v(E.ASSIGN),y()},A=g=>{x(g-1)},y=()=>{x(null),u("")},C=g=>{u(g.target.value)};return n(N,{children:s(O,{children:[n(Q,{children:"사물함 최종 배정 결과"}),i?n(T,{}):n(f,{children:e&&e.length===0?n($,{children:"사물함 배정 기간이 아닙니다."}):s(f,{children:[s(Y,{children:[n(K,{headers:X}),n(J,{contents:(e==null?void 0:e.slice((l-1)*p,l*p))||[],handleContent:A})]}),n(q,{children:n(G,{currentPage:l,totalItems:(e==null?void 0:e.length)||0,itemsPerPage:p,setState:w})}),c!==null&&s(F,{title:"개별 알림",onClose:y,open:!!c,children:[n(D,{onChange:C,value:m,placeholder:"보낼 알림을 입력하세요."}),n(H,{variant:"contained",color:"primary",onClick:I,children:"알림 보내기"})]})]})})]})})};export{ae as default};
